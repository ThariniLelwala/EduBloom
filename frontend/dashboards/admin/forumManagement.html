<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EduBloom - Forum Management</title>
    <link rel="stylesheet" href="../../css/style.css" />
    <link rel="stylesheet" href="../../css/dashboard/user.css" />
    <link rel="stylesheet" href="../../css/topbar.css" />
    <link rel="stylesheet" href="../../css/sidebar.css" />
    <link rel="stylesheet" href="../../css/cards.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css"
      integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="../../css/dashboard/action-btn.css" />
  </head>
  <body>
    <div class="bg-image"></div>

    <!-- sidebar + content -->
    <div class="container">
      <div id="sidebar-container"><!-- Sidebar Start --> <!-- Sidebar End --> </div>

      <main id="content">
        <div class="card-grid">
          <div class="card welcome full">
            <div class="welcome-content">
              <h1 class="heading">Forum Management</h1>
              <div>
                Building a space where knowledge blooms through shared voices.
              </div>
            </div>
            <div class="welcome-image"></div>
          </div>

                    <!-- Total contents, main bar-->
          <div class="card w3">
            <div class="card1">
                <div class="heading">Total forums</div>
                <h2 id="totalUsers">0</h2>
            </div>
            <div class="card1">
                <div class="heading">Total forum admins</div>
                <h2 id="activeUsers">0</h2>
            </div>
            <div class="card1">
                <div class="heading">Most active forum</div>
                <h2 id="suspendedUsers">0</h2>
            </div>
            <div class="card1">
                <div class="heading">Rejected forums</div>
                <h2 id="newUsers">0</h2>
            </div>
          </div>
        </div>

        <!-- Forums Table Section -->
        <div class="card w3">
          <h3>
            <i class="fas fa-comments"></i> All Forums
          </h3>

          <div class="card-title"  style="position: relative; display: inline-block;">
            <i class="fas fa-search" style="position: absolute; left: 10px; top: 40%; transform: translateY(-50%); color: #ccc;"></i>
            <input type="text" id="searchInput" placeholder="Search by forum name or id..."  style="padding-left: 35px;width: 25vw;"/>
        </div>
            <table id="userTable">
              <thead>
                <tr>
                  <th>Forum ID</th>
                  <th>Forum Name</th>
                  <th>Forum Admin</th>
                  <th>Created By</th>
                  <th>Involved Users</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>#FOR001</td>
                  <td>General Discussion</td>
                  <td>John Smith</td>
                  <td>Dr. Sarah Williams</td>
                  <td>156</td>
                  <td><span class="badge badge-active">Active</span></td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-small btn-view"
                        ><i class="fas fa-eye"></i> View</button
                      >
                      <button class="btn-small btn-delete"
                        ><i class="fas fa-trash"></i> Delete</button
                      >
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>#FOR002</td>
                  <td>Technical Support</td>
                  <td>Emily Chen</td>
                  <td>Prof. Michael Davis</td>
                  <td>98</td>
                  <td><span class="badge badge-active">Active</span></td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-small btn-view"
                        ><i class="fas fa-eye"></i> View</button
                      >
                      <button class="btn-small btn-delete"
                        ><i class="fas fa-trash"></i> Delete</button
                      >
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>#FOR003</td>
                  <td>Course Announcements</td>
                  <td>Robert Johnson</td>
                  <td>Prof. Lisa Anderson</td>
                  <td>234</td>
                  <td><span class="badge badge-active">Active</span></td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-small btn-view"
                        ><i class="fas fa-eye"></i> View</button
                      >
                      <button class="btn-small btn-delete"
                        ><i class="fas fa-trash"></i> Delete</button
                      >
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>#FOR004</td>
                  <td>Study Groups</td>
                  <td>Priya Patel</td>
                  <td>Dr. James Wilson</td>
                  <td>67</td>
                  <td><span class="badge badge-inactive">Inactive</span></td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-small btn-view"
                        ><i class="fas fa-eye"></i> View</button
                      >
                      <button class="btn-small btn-delete"
                        ><i class="fas fa-trash"></i> Delete</button
                      >
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        </div>
      </main>
    </div>

    <script src="../../js/topbar.js"></script>
    <script src="../../js/sidebar.js"></script>
    <script src="../../js/bg-manager.js"></script>

    <script>
      // Search functionality for forums
      document.getElementById("forumSearch").addEventListener("keyup", function () {
        const searchTerm = this.value.toLowerCase();
        const rows = document.querySelectorAll("#forumsTable tbody tr");

        rows.forEach((row) => {
          const text = row.innerText.toLowerCase();
          row.style.display = text.includes(searchTerm) ? "" : "none";
        });
      });

      // Search functionality for admins
      document.getElementById("adminSearch").addEventListener("keyup", function () {
        const searchTerm = this.value.toLowerCase();
        const rows = document.querySelectorAll("#adminsTable tbody tr");

        rows.forEach((row) => {
          const text = row.innerText.toLowerCase();
          row.style.display = text.includes(searchTerm) ? "" : "none";
        });
      });

      // Action button handlers
      document.addEventListener("click", function (e) {
        if (e.target.closest(".btn-view")) {
          const row = e.target.closest("tr");
          const id = row.cells[0].textContent;
          alert("View details for: " + id);
          // Add your view logic here
        }

        if (e.target.closest(".btn-update")) {
          const row = e.target.closest("tr");
          const id = row.cells[0].textContent;
          alert("Update admin: " + id);
          // Add your update logic here
        }

        if (e.target.closest(".btn-delete")) {
          const row = e.target.closest("tr");
          const id = row.cells[0].textContent;
          if (confirm("Are you sure you want to delete: " + id + "?")) {
            row.remove();
            alert("Deleted: " + id);
            // Add your delete logic here
          }
        }
      });
    </script>
  </body>
</html>